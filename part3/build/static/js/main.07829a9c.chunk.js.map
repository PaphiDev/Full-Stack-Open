{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Persons.js","services/persons.js","components/Notification.js","components/App.js","index.js"],"names":["PersonForm","submitHandler","name","number","button","onSubmit","text","value","onChange","eventHandler","type","Filter","Persons","person","deleteHandler","map","p","onClick","id","baseURL","returnRequest","request","then","response","data","console","log","axios","get","newObject","post","put","delete","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","msg","App","useState","persons","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","errorMessage","setErrorMessage","resetErrorMessage","setTimeout","useEffect","personsService","initialNumbers","catch","error","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","find","window","confirm","getObject","n","updatedObject","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.07829a9c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm = ({ submitHandler, name, number, button }) => {\r\n    return (\r\n        <>\r\n            <form onSubmit={submitHandler}>\r\n                <div>\r\n                    {name.text} <input value={name.value} onChange={name.eventHandler} />\r\n                </div>\r\n                <div>\r\n                    {number.text} <input value={number.value} onChange={number.eventHandler} />\r\n                </div>\r\n                <div>\r\n                    <button type=\"submit\"> {button} </button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Filter = ({ text, value, eventHandler }) => {\r\n    return (\r\n        <div>\r\n            {text} <input value={value} onChange={eventHandler} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst Persons = ({ person, deleteHandler }) => {\r\n    return (\r\n        <>\r\n            {person.map((p) => (\r\n                <div key={p.name}>\r\n                    <p>\r\n                        {p.name} {p.number}\r\n                        <button onClick={() => deleteHandler(p.id, p.name)}>delete</button>\r\n                    </p>\r\n                </div>\r\n            ))}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Persons\r\n","import axios from 'axios'\r\nconst baseURL = '/api/persons'\r\n\r\n//gets all the phone numbers\r\nconst getAll = () => {\r\n    console.log('Fetching data..')\r\n    const request = axios.get(baseURL)\r\n    return returnRequest(request)\r\n}\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseURL, newObject)\r\n    return returnRequest(request)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseURL}/${id}`, newObject)\r\n    return returnRequest(request)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseURL}/${id}`)\r\n    return returnRequest(request)\r\n}\r\n\r\nconst returnRequest = (request) => {\r\n    return request.then((response) => response.data)\r\n}\r\n\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n\r\n    // styling\r\n    const redError = {\r\n        color: 'red',\r\n        background: 'lightgrey',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10,\r\n    }\r\n\r\n    const greenError = {\r\n        color: 'green',\r\n        background: 'lightgrey',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 5,\r\n        padding: 10,\r\n        marginBottom: 10,\r\n    }\r\n\r\n    return <div style={message.color === 'red' ? redError : greenError}>{message.msg}</div>\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from 'react'\r\nimport PersonForm from './PersonForm'\r\nimport Filter from './Filter'\r\nimport Persons from './Persons'\r\nimport personsService from '../services/persons'\r\nimport Notification from './Notification'\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n    const [name, setNewName] = useState('')\r\n    const [number, setNewNumber] = useState('')\r\n    const [newFilter, setNewFilter] = useState('')\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n    const resetErrorMessage = () => {\r\n        setTimeout(() => {\r\n            setErrorMessage(null)\r\n        }, 5000)\r\n    }\r\n\r\n    // fetch numbers from db.json\r\n    useEffect(() => {\r\n        personsService\r\n            .getAll()\r\n            .then((initialNumbers) => {\r\n                setPersons(initialNumbers)\r\n            })\r\n            .catch((error) => {\r\n                console.log('Failed fetching the data')\r\n            })\r\n    }, [])\r\n\r\n    const removePerson = (id, name) => {\r\n        const result = window.confirm(`Delete ${name}?`)\r\n\r\n        if (result) {\r\n            personsService\r\n                .remove(id)\r\n                .then(() => {\r\n                    setPersons(persons.filter((person) => person.id !== id))\r\n                    setErrorMessage({ msg: `${name} has been removed`, color: 'green' })\r\n                    resetErrorMessage()\r\n                })\r\n                .catch((error) => {\r\n                    setErrorMessage({\r\n                        msg: `Information of ${name} has already been removed from the database`,\r\n                        color: 'red',\r\n                    })\r\n                    resetErrorMessage()\r\n                })\r\n        }\r\n    }\r\n\r\n    // add or update an entry\r\n    const addPerson = (event) => {\r\n        event.preventDefault()\r\n\r\n        if (persons.find((person) => person.name === name)) {\r\n            const result = window.confirm(\r\n                `${name} is already added to the phonebook, replace the old number with a new one?`\r\n            )\r\n\r\n            if (result) {\r\n                const getObject = persons.find((person) => person.name === name)\r\n                const person = persons.find((n) => n.id === getObject.id)\r\n                const updatedObject = { ...person, number: number }\r\n\r\n                personsService\r\n                    .update(getObject.id, updatedObject)\r\n                    .then((response) => {\r\n                        setPersons(\r\n                            persons.map((person) =>\r\n                                person.id !== getObject.id ? person : response\r\n                            )\r\n                        )\r\n                        setErrorMessage({\r\n                            msg: `${name}'s phone number has been updated`,\r\n                            color: 'green',\r\n                        })\r\n                        resetErrorMessage()\r\n                        setNewNumber('')\r\n                        setNewName('')\r\n                    })\r\n                    .catch((error) => {\r\n                        console.log(error.response.data.error)\r\n                        setErrorMessage({\r\n                            msg: `${error.response.data.error}`,\r\n                            color: 'red',\r\n                        })\r\n                        resetErrorMessage()\r\n                    })\r\n            }\r\n        } else {\r\n            const personObject = { name, number }\r\n\r\n            personsService\r\n                .create(personObject)\r\n                .then((response) => {\r\n                    setPersons(persons.concat(response))\r\n                    setErrorMessage({ msg: `Added ${name}`, color: 'green' })\r\n                    resetErrorMessage()\r\n                    setNewNumber('')\r\n                    setNewName('')\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error.response.data.error)\r\n                    setErrorMessage({\r\n                        msg: `${error.response.data.error}`,\r\n                        color: 'red',\r\n                    })\r\n                    resetErrorMessage()\r\n                })\r\n        }\r\n    }\r\n\r\n    const personsToShow =\r\n        newFilter === ''\r\n            ? persons\r\n            : persons.filter((person) =>\r\n                  person.name.toLowerCase().includes(newFilter.toLowerCase())\r\n              )\r\n\r\n    // handlers\r\n    const handleNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n\r\n    const handleNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n\r\n    const handleFilterChange = (event) => {\r\n        setNewFilter(event.target.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Phonebook</h1>\r\n            <Notification message={errorMessage} />\r\n            <Filter\r\n                text={'filter shown with:'}\r\n                value={newFilter}\r\n                eventHandler={handleFilterChange}\r\n            />\r\n\r\n            <h2>Add a new contact</h2>\r\n            <PersonForm\r\n                submitHandler={addPerson}\r\n                name={{ text: 'name', value: name, eventHandler: handleNameChange }}\r\n                number={{ text: 'number', value: number, eventHandler: handleNumberChange }}\r\n                button={'add'}\r\n            />\r\n\r\n            <h2>Numbers</h2>\r\n            <Persons person={personsToShow} deleteHandler={removePerson} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}